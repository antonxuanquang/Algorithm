import java.util.ArrayList;


public class Nine {
	/*
	 * 
	 * BST Sequence: A binary search tree was created by traversing through an 
	 * array from left to right and inserting each element. Given a binary search
	 * tree with distinct elements, print all possible arrays that could have 
	 * led to this tree. 
	 * 
	 */
	 
	public static ArrayList<ArrayList<String>> BSTSequence(BinaryTreeNode root) {
		ArrayList<ArrayList<String>> arrays = new ArrayList<ArrayList<String>>();
		BSTSequenceHelperLeft(root, arrays, null);
//		BSTSequenceHelperRight(root, arrays, null);
		return arrays;
	}
	
	private static void BSTSequenceHelperLeft(
			BinaryTreeNode root, ArrayList<ArrayList<String>> result, ArrayList<String> current) {
		if (root == null) return;
		if (current == null) {
			current = new ArrayList<String>();
			result.add(current);
		} 
		ArrayList<String> newArray = duplicate(current);
		result.add(newArray);
		current.add(root.getLabel());
		BSTSequenceHelperLeft(root.getLeft(), result, newArray);
		BSTSequenceHelperLeft(root.getRight(), result, newArray);
		
	}
	
	private static void BSTSequenceHelperRight(
			BinaryTreeNode root, ArrayList<ArrayList<String>> result, ArrayList<String> current) {
		if (root == null) return;
		if (current == null) {
			current = new ArrayList<String>();
			addRightFirst(root, current);
			result.add(current);
		} else {
			ArrayList<String> newArray = duplicate(current);
			addRightFirst(root, newArray);
			result.add(newArray);
		}
		BSTSequenceHelperRight(root.getRight(), result, current);
		BSTSequenceHelperRight(root.getLeft(), result, current);
	}
	
	private static ArrayList<String> duplicate(ArrayList<String> current) {
		ArrayList<String> result = new ArrayList<String>();
		for (String string: current) result.add(string);
		return result;
	}
	
	private static void addLeftFirst(BinaryTreeNode node, ArrayList<String> array) {
		if (node == null) return;
		addLeftFirst(node.getLeft(), array);
		addLeftFirst(node.getRight(), array);
		array.add(node.getLabel());
	}
	
	private static void addRightFirst(BinaryTreeNode node, ArrayList<String> array) {
		if (node == null) return;
		addRightFirst(node.getRight(), array);
		addRightFirst(node.getLeft(), array);
		array.add(node.getLabel());
	}
	
	
	
	public static void main(String[] args) {
		BinaryTreeNode a = new BinaryTreeNode("a");
		BinaryTreeNode b = new BinaryTreeNode("b");
		BinaryTreeNode c = new BinaryTreeNode("c");
		BinaryTreeNode d = new BinaryTreeNode("d");
		BinaryTreeNode e = new BinaryTreeNode("e");
		BinaryTreeNode f = new BinaryTreeNode("f");
		BinaryTreeNode g = new BinaryTreeNode("g");
		BinaryTreeNode h = new BinaryTreeNode("h");
		
		a.setLeft(b);
		a.setRight(h);
		b.setLeft(c);
		b.setRight(d);
//		c.setRight(h);
		h.setLeft(e);
		h.setRight(g);
		e.setLeft(f);
		
		ArrayList<ArrayList<String>> result = BSTSequence(a);
		for (ArrayList<String> array: result) {
			for (String string: array) {
				System.out.print(string + " ");
			}
			System.out.println();
		}
	}
}
